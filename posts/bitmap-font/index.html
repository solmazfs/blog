<!doctype html><html><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css><title>blog.solmazfs &ndash; Bitmap Font (GODOT)</title><link rel=stylesheet href=https://solmazfs.github.io/blog/css/pub.css><link rel=stylesheet href=https://solmazfs.github.io/blog/css/screen.css><link rel=stylesheet href=https://solmazfs.github.io/blog/css/custom.css><link rel=stylesheet href=https://solmazfs.github.io/blog/css/syntax.css><style>th{font-weight:400}th,td{padding:0}code a{color:inherit;text-decoration:none}.tex,.latex{text-transform:uppercase}.tex>span,.latex>span{line-height:0;text-transform:uppercase}.latex>:first-child{margin-left:-.36em;margin-right:-.15em;vertical-align:.3em;font-size:70%}.tex>:last-child,.latex>:last-child{margin-left:-.1667em;margin-right:-.125em;vertical-align:-.5ex}.table-comments{width:auto;margin:auto;float:column-top;column-span:all}.table-comments th,.table-comments td{padding-left:2pt;padding-right:2pt}.table-comments th:nth-child(3),.table-comments td:nth-child(3){text-align:left}</style></head><body translate=no><header class="counter-skip header"><a href=https://solmazfs.github.io/blog><img alt=solmazfs src=https://solmazfs.github.io/blog/images/solmazfs.svg loading=lazy></a><nav><ul><li><a href=/blog/posts/>Posts</a></li><li><a href=/blog/categories/>Categories</a></li><li><a href=/blog/now/>Now</a></li></ul></nav></header><hr><main><aside class=counter-skip><cite>Bitmap Font (GODOT)</cite>
<cite>Apr 08, 2022</cite>
<cite>221 Words</cite>
<cite>in progress</cite><br><br><p><i>""</i></p></aside><section class=counter-skip><h3 id=drawing-part-libresprite>drawing part [libresprite]</h3><p>Create 110x50 canvas</p><p>pick color palette in presets menu, e.g Nes</p><p>fill background a bit bright color e.g. #92d3ff</p><p>make 8x8 square for each letter, number and character etc. and fill darker color e.g. #2000b2</p><p>we are ready to draw some letters on it</p><p>you can download it here</p><h3 id=godot-part>godot part</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>extends Node2D
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># font texture
</span></span><span class=line><span class=cl>const FONT_TEXTURE:Texture = preload(&#34;res://bitmap-font.png&#34;)
</span></span><span class=line><span class=cl># texture size
</span></span><span class=line><span class=cl>const T_SIZE = {w=110,h=50}
</span></span><span class=line><span class=cl># project window size
</span></span><span class=line><span class=cl>const WIND = {w=128,h=128}
</span></span><span class=line><span class=cl>export(bool) var drw_grid = false
</span></span><span class=line><span class=cl>onready var bitmap_font:BitmapFont = BitmapFont.new()
</span></span><span class=line><span class=cl>var chars:String = &#34;abcdefghiklmnoprstuvwyz123456789!©xµ&lt;&gt;£#$:-.&#39; &#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>func _ready():
</span></span><span class=line><span class=cl>	gen_bitmap_font(T_SIZE.w,T_SIZE.h)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>func _draw() -&gt; void:
</span></span><span class=line><span class=cl>	draw_grid(drw_grid)
</span></span><span class=line><span class=cl>	draw_textbox_window([&#34;hello world!&#34;,&#34;&#39;hello&#39;&#34;,&#34;world.&#34;])
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>func draw_grid(value:bool) -&gt; void:
</span></span><span class=line><span class=cl>	# draw grid
</span></span><span class=line><span class=cl>	var col:Array = [Color.blueviolet,Color.aqua]
</span></span><span class=line><span class=cl>	match value:
</span></span><span class=line><span class=cl>		true:
</span></span><span class=line><span class=cl>			for i in range(8,128,8):
</span></span><span class=line><span class=cl>				draw_line(Vector2(i,8),Vector2(i,120),col[0],2)
</span></span><span class=line><span class=cl>				draw_line(Vector2(8,i),Vector2(120,i),col[0],2)
</span></span><span class=line><span class=cl>			draw_line(Vector2(128/2,0),Vector2(128/2,128),col[1],2)
</span></span><span class=line><span class=cl>			draw_line(Vector2(0,128/2),Vector2(128,128/2),col[1],2)
</span></span><span class=line><span class=cl>		false:
</span></span><span class=line><span class=cl>			return
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># generating bitmap font
</span></span><span class=line><span class=cl>func gen_bitmap_font(_w:int,_h:int) -&gt; void:
</span></span><span class=line><span class=cl>	bitmap_font.add_texture(FONT_TEXTURE)
</span></span><span class=line><span class=cl>	bitmap_font.height = 8 # using for Label -&gt; new line &#34;\n&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	var char_map:Array = []
</span></span><span class=line><span class=cl>	for y in range(1,_h,10):
</span></span><span class=line><span class=cl>		for x in range(1,_w,10):
</span></span><span class=line><span class=cl>			char_map.append(Vector2(x,y))
</span></span><span class=line><span class=cl>	for i in range(0,chars.length()):
</span></span><span class=line><span class=cl>		bitmap_font.add_char(chars.ord_at(i),0,Rect2(char_map[i],Vector2(8,8)),Vector2.ZERO,8)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># draw text window
</span></span><span class=line><span class=cl>func draw_textbox_window(_text:Array) -&gt; void:
</span></span><span class=line><span class=cl>	var col:Array = [Color(&#34;#fcfcfc&#34;),Color.black]
</span></span><span class=line><span class=cl>	var longest:String= &#34;&#34;
</span></span><span class=line><span class=cl>	for i in _text:
</span></span><span class=line><span class=cl>		if longest.length() &lt; i.length():
</span></span><span class=line><span class=cl>			longest = i
</span></span><span class=line><span class=cl>	var box_w:int = longest.length()*8+8
</span></span><span class=line><span class=cl>	var box_h:int = _text.size()*9+9
</span></span><span class=line><span class=cl>	var center:Dictionary = {x=WIND.w/2-(box_w)/2, y=WIND.h/2-(box_h)/2}
</span></span><span class=line><span class=cl>	for m in range(3):
</span></span><span class=line><span class=cl>		draw_rect(Rect2(center.x+m,center.y+m,box_w-m*2,box_h-m*2),col[m-1]) # a little hack for col arr
</span></span><span class=line><span class=cl>	for t in _text.size():
</span></span><span class=line><span class=cl>		draw_string(bitmap_font,Vector2(center.x+3+2,center.y+3+2+t*9),_text[t],col[0])
</span></span></code></pre></div></section></main><footer><p>solmazfs © 2021-2022 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>BY-NC-SA 4.0</a></p></footer></body></html>