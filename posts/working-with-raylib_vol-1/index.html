<!doctype html><html><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css><title>blog.solmazfs &ndash; Working with raylib Vol:1</title><link rel=stylesheet href=https://solmazfs.github.io/blog/css/pub.css><link rel=stylesheet href=https://solmazfs.github.io/blog/css/screen.css><link rel=stylesheet href=https://solmazfs.github.io/blog/css/custom.css><link rel=stylesheet href=https://solmazfs.github.io/blog/css/syntax.css><style>th{font-weight:400}th,td{padding:0}code a{color:inherit;text-decoration:none}.tex,.latex{text-transform:uppercase}.tex>span,.latex>span{line-height:0;text-transform:uppercase}.latex>:first-child{margin-left:-.36em;margin-right:-.15em;vertical-align:.3em;font-size:70%}.tex>:last-child,.latex>:last-child{margin-left:-.1667em;margin-right:-.125em;vertical-align:-.5ex}.table-comments{width:auto;margin:auto;float:column-top;column-span:all}.table-comments th,.table-comments td{padding-left:2pt;padding-right:2pt}.table-comments th:nth-child(3),.table-comments td:nth-child(3){text-align:left}</style></head><body translate=no><header class="counter-skip header"><a href=https://solmazfs.github.io/blog><img alt=solmazfs src=https://solmazfs.github.io/blog/images/solmazfs.svg loading=lazy></a><nav class=navbar><ul><li><a href=https://solmazfs.github.io/blog/posts/>Posts</a></li><li><a href=https://solmazfs.github.io/blog/categories/>Categories</a></li><li><a href=https://solmazfs.github.io/blog/projects/>Projects</a></li><li><a href=https://solmazfs.github.io/blog/mixedlog/>Mixed-Log</a></li><li><a href=https://solmazfs.github.io/blog/now/>Now</a></li></ul></nav></header><hr><main><aside class=counter-skip><cite>Working with raylib Vol:1</cite>
<cite>Oct 18, 2022</cite>
<cite>502 Words</cite>
<cite>in progress</cite><br><br><p><i>"Notes."</i></p></aside><section class=counter-skip><h3 id=get-color-from-hex-value>Get color from hex value</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl># color code --&gt; #0000ff
</span></span><span class=line><span class=cl># replace # -&gt; 0x &amp; add alpha value at the end; for max -&gt; ff
</span></span><span class=line><span class=cl>Color col = GetColor(0x0000ffff);
</span></span></code></pre></div><h3 id=format-string>Format string</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>TextFormat(&#34;Player: %04d&#34;, player.score);
</span></span><span class=line><span class=cl># output for score 10 --&gt; 0010
</span></span></code></pre></div><h3 id=compile-and-run-cc>Compile and run [c/c++]</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl># c
</span></span><span class=line><span class=cl>gcc main.c -o demo -lraylib -lGL -lm -lpthread -ldl -lrt -lX11 &amp;&amp; ./demo
</span></span><span class=line><span class=cl># c++
</span></span><span class=line><span class=cl>g++ main.cpp -o demo -lraylib -lGL -lm -lpthread -ldl -lrt -lX11 &amp;&amp; ./demo
</span></span></code></pre></div><h3 id=web-build-code-snipped>Web build code snipped</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#include &#34;raylib.h&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>#if defined(PLATFORM_WEB)
</span></span><span class=line><span class=cl>    #include &lt;emscripten/emscripten.h&gt;
</span></span><span class=line><span class=cl>#endif
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>#define _SCREEN_W 640
</span></span><span class=line><span class=cl>#define _SCREEN_H 360
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>void UpdateDrawFrame(void);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>int main() {
</span></span><span class=line><span class=cl>    SetWindowState(FLAG_VSYNC_HINT);
</span></span><span class=line><span class=cl>    InitWindow(_SCREEN_W,_SCREEN_H,&#34;Pong&#34;);
</span></span><span class=line><span class=cl>    #if defined(PLATFORM_WEB)
</span></span><span class=line><span class=cl>        emscripten_set_main_loop(UpdateDrawFrame, 0, 1);
</span></span><span class=line><span class=cl>    #else
</span></span><span class=line><span class=cl>    SetWindowPosition(0,0); // open window top-left corner
</span></span><span class=line><span class=cl>    SetTargetFPS(60);
</span></span><span class=line><span class=cl>    while (!WindowShouldClose()) {
</span></span><span class=line><span class=cl>        UpdateDrawFrame();
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    #endif
</span></span><span class=line><span class=cl>    CloseWindow();
</span></span><span class=line><span class=cl>    return 0;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>void UpdateDrawFrame(void) {
</span></span><span class=line><span class=cl>    // update &amp; input event codes here
</span></span><span class=line><span class=cl>    BeginDrawing();
</span></span><span class=line><span class=cl>        ClearBackground(BLACK);
</span></span><span class=line><span class=cl>        // draw codes here
</span></span><span class=line><span class=cl>        DrawFPS(4,4);
</span></span><span class=line><span class=cl>    EndDrawing();
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl># build &amp; run
</span></span><span class=line><span class=cl># if there have resources e.g font sound etc. add &#34; --preload-file resources &#34;
</span></span><span class=line><span class=cl>mkdir build
</span></span><span class=line><span class=cl>emcc -o build/index.html main.c -Os -Wall -I ../raylib/src \
</span></span><span class=line><span class=cl>    -L ../raylib/src -s USE_GLFW=3 -s ASYNCIFY --shell-file minshell.html \
</span></span><span class=line><span class=cl>    -DPLATFORM_WEB -lraylib &amp;&amp; cd build/ &amp;&amp; python -m http.server
</span></span></code></pre></div><h3 id=4-direction-movement-logicgrid>4 direction movement logic(grid).</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>enum MOVE {UP,DOWN,LEFT,RIGHT};
</span></span><span class=line><span class=cl>Vector2 move_dir[4] = {{0,-1},{0,1},{-1,0},{1,0}};
</span></span><span class=line><span class=cl>int move_dir_size = sizeof(move_dir)/sizeof(move_dir[0]);
</span></span><span class=line><span class=cl>for (int i=0; i&lt;move_dir_size; i++) {
</span></span><span class=line><span class=cl>    move_dir[i] = Vector2Scale(move_dir[i],16);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// move e.g
</span></span><span class=line><span class=cl>position.x += move_dir[RIGHT].x
</span></span><span class=line><span class=cl>position.y += move_dir[RIGHT].y
</span></span></code></pre></div><h3 id=drawing-pyramid-with-bunch-of-rectanglesas-is-pixel>Drawing pyramid with bunch of rectangles(as is pixel).</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>int s = 40;
</span></span><span class=line><span class=cl>int w = 10;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>for (int i=1;i&lt;=s;i+=2) {
</span></span><span class=line><span class=cl>    for (int j=1; j&lt;=i; j++) {
</span></span><span class=line><span class=cl>        int x = (screen_w/2)-(s/2);
</span></span><span class=line><span class=cl>        int y = (screen_h/2)-(s/2*w/2);
</span></span><span class=line><span class=cl>        DrawRectangle(x-(i/2)*w+j*w,y+(i/2)*w,w,w,RED);
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p><figure><img alt=folder src=https://solmazfs.github.io/blog/images/mixed-log/pyramid.png width=140 loading=lazy><figcaption><span>"result"</span></figcaption></figure></p><h3 id=marquee-effect>Marquee effect.</h3><p>&mdash;&ndash; Custom font image from raylib repo: <a href=https://github.com/raysan5/raylib/blob/0abba4dc1854e71f58b252e840058178ea845e25/examples/text/resources/fonts/alagard.png>alagard.png</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Font alagard = LoadFont(&#34;resources/alagard.png&#34;); // custom font
</span></span><span class=line><span class=cl>char *intro = &#34;HELLO WORLD!&#34;;
</span></span><span class=line><span class=cl>float scroll_speed = 1.0f;
</span></span><span class=line><span class=cl>float current_left = canvasWidth+8;
</span></span><span class=line><span class=cl>float left_corner = -(MeasureText(intro, alagard.baseSize*1.0f)-8);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// while loop...
</span></span><span class=line><span class=cl>    current_left -= scroll_speed;
</span></span><span class=line><span class=cl>    if (current_left &lt;= left_corner ) {
</span></span><span class=line><span class=cl>        current_left = canvasWidth+8;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    // drawing...
</span></span><span class=line><span class=cl>    DrawTextEx(alagard,intro,(Vector2){current_left,108},alagard.baseSize*1.0f,1.0f,RED);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// unload font
</span></span><span class=line><span class=cl>UnloadFont(alagard);
</span></span></code></pre></div><p><small>!drop fsp comes while recording.</small></p><p><figure><img alt=folder src=https://solmazfs.github.io/blog/images/mixed-log/marquee.gif width=140 loading=lazy><figcaption><span>"result"</span></figcaption></figure></p><h3 id=3d-cube-on-2d-canvas-with-rotation-animation>3d cube on 2d canvas with rotation animation.</h3><p>&mdash;&ndash; <a href="https://www.youtube.com/watch?v=HIFhRacJXPY">PICO8 (fake 3D?) CAD BGF 2019</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>float t = 0;
</span></span><span class=line><span class=cl>float rotation_speed = 0.03f;
</span></span><span class=line><span class=cl>Vector2 p[4];
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// while loop
</span></span><span class=line><span class=cl>    t += rotation_speed;
</span></span><span class=line><span class=cl>    if (t &gt;=1.5f) {
</span></span><span class=line><span class=cl>        t = 0;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    // drawing...
</span></span><span class=line><span class=cl>    // background
</span></span><span class=line><span class=cl>    Rectangle rec = {(float)128/2,(float)128/2-40,60,60};
</span></span><span class=line><span class=cl>    Vector2 og = {0,0};
</span></span><span class=line><span class=cl>    DrawRectanglePro(rec,og,45,BLACK);
</span></span><span class=line><span class=cl>    // cube
</span></span><span class=line><span class=cl>    for (int i=0; i&lt;4; i++) {
</span></span><span class=line><span class=cl>        float x = 64+cos(t+((float)i/4.0*M_PI*2))*20;
</span></span><span class=line><span class=cl>        float y = 56+sin(t+((float)i/4.0*M_PI*2))*20;
</span></span><span class=line><span class=cl>        p[i] = (Vector2){x,y};
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    for (int i=1; i&lt;5; i++) {
</span></span><span class=line><span class=cl>        int j = i%4+1;
</span></span><span class=line><span class=cl>        DrawLine(p[i-1].x,p[i-1].y,p[i-1].x,p[i-1].y+20,RAYWHITE);
</span></span><span class=line><span class=cl>        DrawLine(p[i-1].x,p[i-1].y,p[j-1].x,p[j-1].y,RAYWHITE);
</span></span><span class=line><span class=cl>        DrawLine(p[i-1].x,p[i-1].y+20,p[j-1].x,p[j-1].y+20,RAYWHITE);
</span></span><span class=line><span class=cl>    }
</span></span></code></pre></div><p><figure><img alt=folder src=https://solmazfs.github.io/blog/images/mixed-log/cube-anim.gif width=140 loading=lazy><figcaption><span>"result"</span></figcaption></figure></p><h3 id=low-res-pixel-canvas--simple-setup>Low-res (pixel) canvas / simple setup.</h3><p>&mdash;&ndash; <a href="https://www.raylib.com/examples/core/loader.html?name=core_smooth_pixelperfect">smooth pixel-perfect camera</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#include &lt;stdio.h&gt;
</span></span><span class=line><span class=cl>#include &#34;raylib.h&#34;
</span></span><span class=line><span class=cl>int main() {
</span></span><span class=line><span class=cl>    const int screenWidth = 512;
</span></span><span class=line><span class=cl>    const int screenHeight = 512;
</span></span><span class=line><span class=cl>    const int canvasWidth = 128;
</span></span><span class=line><span class=cl>    const int canvasHeight = 128;
</span></span><span class=line><span class=cl>    InitWindow(screenWidth,screenHeight,&#34;low-res&#34;);
</span></span><span class=line><span class=cl>    SetWindowState(FLAG_VSYNC_HINT);
</span></span><span class=line><span class=cl>    SetTargetFPS(60);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    RenderTexture2D target = LoadRenderTexture(canvasWidth,canvasHeight);
</span></span><span class=line><span class=cl>    Rectangle source = {0,-canvasHeight,target.texture.width,-target.texture.height};
</span></span><span class=line><span class=cl>    Rectangle dest = {0,0,screenWidth,screenHeight};
</span></span><span class=line><span class=cl>    Camera2D camera = {0};
</span></span><span class=line><span class=cl>    camera.zoom = 1.0f;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    while (!WindowShouldClose()) {
</span></span><span class=line><span class=cl>        BeginTextureMode(target);
</span></span><span class=line><span class=cl>            ClearBackground(RAYWHITE);
</span></span><span class=line><span class=cl>            BeginMode2D(camera);
</span></span><span class=line><span class=cl>                DrawFPS(4,4);
</span></span><span class=line><span class=cl>                // drawing test
</span></span><span class=line><span class=cl>                Rectangle rec = {(float)128/2,(float)128/2-40,60,60};
</span></span><span class=line><span class=cl>                Vector2 og = {0,0};
</span></span><span class=line><span class=cl>                DrawRectanglePro(rec,og,45,BLACK);
</span></span><span class=line><span class=cl>            EndMode2D();
</span></span><span class=line><span class=cl>        EndTextureMode();
</span></span><span class=line><span class=cl>        BeginDrawing();
</span></span><span class=line><span class=cl>            DrawTexturePro(target.texture,source,dest,(Vector2){0,0},0,WHITE);
</span></span><span class=line><span class=cl>        EndDrawing();
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    UnloadRenderTexture(target);
</span></span><span class=line><span class=cl>    CloseWindow();
</span></span><span class=line><span class=cl>    return 0;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p><figure><img alt=folder src=https://solmazfs.github.io/blog/images/mixed-log/low-res_rectangle.png width=140 loading=lazy><figcaption><span>"result"</span></figcaption></figure></p></section></main><br><footer><span style=float:right><cite>Edited on Oct 19, 2022</cite></span>
<b>solmazfs</b> © 2021-2022 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>BY-NC-SA 4.0</a></footer></body></html>